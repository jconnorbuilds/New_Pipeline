{"version":3,"file":"js/costsheet.js","mappings":"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","sources":["webpack://npt/webpack/runtime/chunk loaded","webpack://npt/external var \"jQuery\"","webpack://npt/./src/js/utils.js","webpack://npt/./src/js/costsheet/currency_calculator.js","webpack://npt/external var \"DataTable\"","webpack://npt/./src/js/tables/dt-shared.js","webpack://npt/./src/js/modals/pay-period-modal.js","webpack://npt/./src/js/costs-and-invoices-common-funcs.js","webpack://npt/./src/js/costsheet/costsheet-dt.js","webpack://npt/./src/js/costsheet/costsheet.js","webpack://npt/webpack/bootstrap","webpack://npt/webpack/runtime/compat get default export","webpack://npt/webpack/runtime/define property getters","webpack://npt/webpack/runtime/hasOwnProperty shorthand","webpack://npt/webpack/runtime/make namespace object","webpack://npt/webpack/runtime/publicPath","webpack://npt/webpack/runtime/jsonp chunk loading","webpack://npt/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var __WEBPACK_NAMESPACE_OBJECT__ = jQuery;","import $ from 'jquery';\n\nexport const csrftoken = document.querySelector('[name=csrfmiddlewaretoken]')\n  ? document.querySelector('[name=csrfmiddlewaretoken]').value\n  : null;\n\nconst separateThousands = (x) => {\n  return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n};\n\nconst separateThousandsOnInput = (x) => {\n  let xInt = parseInt(x.replaceAll(',', ''));\n  return xInt.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n};\n\n// Parses a thousands-separated number from str -> int\nconst removeCommas = (numStr) => {\n  return parseInt(numStr.replaceAll(',', ''));\n};\n\n/**\n * placeholder\n *\n * @param {String[]} currencySymbolsList // ex. [\"USD\", \"JPY\",...]\n */\nconst getFXRatesDict = (successCallback) => {\n  $.ajax({\n    headers: { 'X-CSRFToken': csrftoken },\n    method: 'GET',\n    url: '/pipeline/forex-rates',\n    dataType: 'json',\n    /** @param {Object.<string, number>} i.e. ex. { USD: 146.3242, ...} */\n    success: successCallback,\n    error: (response) => alert(response),\n  });\n};\n\nconst theDate = () => new Date();\n\nconst dates = {\n  currentDate: () => {\n    const date = theDate();\n    const year = date.getFullYear();\n    const month = date.getMonth() + 1;\n    return [year, month];\n  },\n  thisYear: () => theDate().getFullYear(),\n  thisMonth: () => theDate().getMonth() + 1,\n};\n\nconst truncate = (string, maxLength = 30) => {\n  // Function to count Japanese characters\n  const allowedLengthJp = Math.round(maxLength * 0.5);\n\n  const countJapaneseCharacters = (str) => {\n    // Regex checks for hiragana, katakana, most kanji, and full-width romaji\n    const JPRegex =\n      /[\\u3040-\\u309F\\u30A0-\\u30FF\\uFF01-\\uFF5E\\u4E00-\\u9FAF\\u3400-\\u4DBF]/gu;\n    const matches = str.match(JPRegex);\n    return matches ? matches.length : 0;\n  };\n\n  // Calculate the number of Japanese characters\n  const jpCharCount = countJapaneseCharacters(string);\n  const totalLength = string.length;\n\n  // Truncate based on the number of JP + EN characters\n  if (jpCharCount > allowedLengthJp) {\n    return string.substring(0, allowedLengthJp) + '...';\n  } else if (jpCharCount >= maxLength * 0.66 && totalLength > maxLength * 0.5) {\n    return string.substring(0, Math.round(maxLength * 0.5)) + '...';\n  } else if (\n    jpCharCount >= maxLength * 0.33 &&\n    totalLength > maxLength * 0.33\n  ) {\n    return string.substring(0, maxLength * 0.33) + '...';\n  } else if (\n    jpCharCount >= maxLength * 0.125 &&\n    totalLength > maxLength * 0.83\n  ) {\n    return string.substring(0, Math.round(maxLength * 0.83)) + '...';\n  } else if (totalLength > maxLength) {\n    return string.substring(0, maxLength) + '...';\n  }\n\n  // No truncation needed\n  return string;\n};\n\nconst slugify = (str) =>\n  str\n    .toLowerCase()\n    .trim()\n    .replace(/[^\\w\\s-]/g, '')\n    .replace(/[\\s_-]+/g, '-')\n    .replace(/^-+|-+$/g, '');\n\nconst createElement = (type, options = {}) => {\n  const element = document.createElement(type);\n\n  // classes, attributes, text, children, id, data,\n  if (options.classes) {\n    typeof options.classes === 'string'\n      ? element.classList.add(options.classes)\n      : element.classList.add(...options.classes);\n  }\n\n  if (options.attributes) {\n    Object.keys(options.attributes).forEach((key) => {\n      element.setAttribute(key, options.attributes[key]);\n    });\n  }\n\n  if (options.text) element.textContent = options.text;\n\n  if (options.children) {\n    options.children.forEach((child) => {\n      element.appendChild(createElement(...child));\n    });\n  }\n\n  if (options.id) element.id = options.id;\n\n  if (options.data) {\n    Object.keys(options.data).forEach((key) => {\n      element.dataset[key] = options.data[key];\n    });\n  }\n\n  return element;\n};\n\nexport {\n  separateThousands,\n  separateThousandsOnInput,\n  removeCommas,\n  getFXRatesDict,\n  dates,\n  csrftoken as CSRFTOKEN,\n  truncate,\n  slugify,\n  createElement,\n};\n","import {\n  separateThousands,\n  separateThousandsOnInput,\n  removeCommas,\n  getFXRatesDict,\n  createElement,\n} from '../utils.js';\n\nconst calcInput = document.querySelector('#calcInput');\nconst calcResult = document.querySelector('#calcResult');\nconst source = document.querySelector('#calcFrom');\nconst target = document.querySelector('#calcTo');\n\nconst createOptionEl = (currency, initialCurrency) => {\n  const el = createElement('option', {\n    attributes: { value: currency },\n    text: currency,\n  });\n  if (el.value === initialCurrency) el.setAttribute('selected', '');\n\n  return el;\n};\n\nconst evaluate = (inputVal, srcRate, trgtRate) =>\n  (removeCommas(inputVal) * (srcRate / trgtRate)).toFixed(2);\n\nconst zeroInputAndOutput = (input, output) => (\n  (input.value = 0), (output.value = '0.00')\n);\n\nconst Calculator = (() => {\n  /**\n   * Initializes the calculator with currency symbols and their foreign exchange rates\n   *\n   * @param {Object.<string, number>} currencies // ex. { USD: 146.3242, ...}\n   */\n  const build = (fxRatesDict) => {\n    Object.keys(fxRatesDict)\n      .sort()\n      .forEach((currency) => {\n        const sourceOption = createOptionEl(currency, 'JPY');\n        const targetOption = createOptionEl(currency, 'EUR');\n\n        source.appendChild(sourceOption);\n        target.appendChild(targetOption);\n      });\n\n    const handleCalcInput = (inputEl, outputEl) =>\n      inputEl.value\n        ? calculate(inputEl, outputEl)\n        : zeroInputAndOutput(inputEl, outputEl);\n\n    const calculate = (input, output) => {\n      input.value = separateThousandsOnInput(input.value);\n      output.value = separateThousands(\n        evaluate(\n          input.value,\n          fxRatesDict[source.value],\n          fxRatesDict[target.value]\n        )\n      );\n      return output.value;\n    };\n\n    // Add event listeners to recalculate on input or when a different currency is selected\n    calcInput.addEventListener('input', () =>\n      handleCalcInput(calcInput, calcResult)\n    );\n\n    [source, target].forEach((selectEl) => {\n      selectEl.addEventListener('change', () =>\n        handleCalcInput(calcInput, calcResult)\n      );\n    });\n  };\n\n  const setup = () => {\n    getFXRatesDict((fxRatesDict) => build(fxRatesDict));\n  };\n\n  return { setup };\n})();\n\nexport default Calculator;\n","var __WEBPACK_NAMESPACE_OBJECT__ = DataTable;","import DataTable from 'datatables.net';\nimport $ from 'jquery';\nimport { CSRFTOKEN } from '../utils.js';\n\nlet firstSelectedBox;\nlet firstSelectedRow;\nlet ongoingSelection = false;\nlet mouseDown = 0;\n\nexport const initializeGlobalMouseEvents = () => {\n  document.body.addEventListener('mousedown', () => {\n    mouseDown = 1;\n  });\n\n  document.body.addEventListener('mouseup', () => {\n    mouseDown = 0;\n    ongoingSelection = false;\n  });\n};\n\nexport const beginSelection = (e) => {\n  ongoingSelection = true;\n  firstSelectedBox = e.target;\n  firstSelectedRow = e.target.closest('tr');\n  firstSelectedRow.classList.toggle('.selected-row');\n  firstSelectedBox.checked = !firstSelectedBox.checked;\n};\n\nexport const handleSingleClick = (e) => {\n  if (!mouseDown) {\n    const checkbox = e.target;\n    const row = checkbox.closest('tr');\n    const isChecked = firstSelectedBox.checked;\n\n    checkbox.checked = !isChecked;\n    checkbox.checked\n      ? row.classList.add('selected-row')\n      : row.classList.remove('selected-row');\n  }\n};\n\nexport const selectOnDrag = (e) => {\n  if (mouseDown && ongoingSelection && e.target.closest('tr')) {\n    const row = e.target.closest('tr');\n    const checkbox = row.querySelector('.form-check-input') || null;\n    const isChecked = firstSelectedBox.checked;\n    isChecked\n      ? row.classList.add('selected-row')\n      : row.classList.remove('selected-row');\n\n    if (checkbox) checkbox.checked = isChecked;\n  }\n};\n\nexport const preventHighlighting = (e) => {\n  if (mouseDown && ongoingSelection) e.preventDefault();\n};\n\nexport const requestInvoice = (costID, table, costPayPeriod = 'next') => {\n  // requests the vendor invoice\n  console.log({ costID }, { table });\n  $.ajax({\n    headers: { 'X-CSRFToken': CSRFTOKEN },\n    url: '/pipeline/request-single-invoice/' + costID + '/',\n    method: 'POST',\n    data: { pay_period: costPayPeriod },\n    dataType: 'json',\n    success: function (data) {\n      console.log('invoice request callback: ', data); // make this a toast\n      new DataTable(table)\n        .row(`#${data.response.id}`)\n        .data(data.response)\n        .invalidate()\n        .draw(false);\n    },\n    error: (data) => {\n      console.warn(data);\n      alert(\n        'There was an error. Try again, and if the error persists, request the invoice the old fashioned way'\n      );\n    },\n  });\n};\n","import Modal from 'bootstrap/js/dist/modal';\nimport { requestInvoice } from '../tables/dt-shared.js';\n\nconst form = document.querySelector('form#pay-period-form');\nconst modalEl = document.querySelector('#pay-period-modal');\nconst modal = new Modal(modalEl);\nconst defineMenu = (row) => row.querySelector('ul.dropdown-menu > li');\nconst descriptionDiv = document.querySelector(\n  '#pay-period-modal .invoice-desc'\n);\nmodalEl.addEventListener('hide.bs.modal', () => {\n  form.reset();\n  descriptionDiv.innerHTML = '';\n});\n\nconst submitForm = (e, table) => {\n  e.preventDefault();\n  const costID = document.querySelector('#pay-period-form #id_cost_id').value;\n  const payPeriod = document.querySelector(\n    '#pay-period-form #id_pay_period'\n  ).value;\n  requestInvoice(costID, table, payPeriod);\n\n  modal.hide();\n};\n\nconst launchModal = (rowData) => {\n  console.log({ rowData });\n  const idField = document.querySelector('#pay-period-modal #id_cost_id');\n\n  const descriptors = [\n    `Vendor name: ${rowData.vendor_name}`,\n    `PO number: ${rowData.PO_number}`,\n    `Job name: ${rowData.job_name}`,\n  ];\n  descriptors.forEach((str) => {\n    const pEl = document.createElement('p');\n    pEl.textContent = str;\n    descriptionDiv.appendChild(pEl);\n  });\n\n  idField.value = rowData.id;\n  modal.show();\n};\n\nexport { form, defineMenu, launchModal, submitForm };\n","import $ from 'jquery';\nwindow.$ = $;\nimport DataTable from 'datatables.net';\nimport { CSRFTOKEN } from './utils.js';\nimport * as PayPeriod from './modals/pay-period-modal.js';\nimport { requestInvoice } from './tables/dt-shared.js';\n\n/**\n * create a Bootstrap input group with a \"request invoice\" button\n * and a dropdown to optionally set the payment period to something other than default.\n *\n * @param {*} - JSON data from DataTables row\n * @returns {string} - the outerHTML of the input group (DataTables render fn doesn't accept nodes)\n */\nconst renderRequestBtn = (data, row) => {\n  const btnGroup = document.createElement('div');\n  btnGroup.classList.add('btn-group', 'btn-group-sm');\n  btnGroup.setAttribute('role', 'group');\n  btnGroup.setAttribute(\n    'aria-label',\n    'Invoice request button with nested dropdown'\n  );\n\n  const requestBtn = document.createElement('button');\n  requestBtn.classList.add('btn', 'btn-primary', 'inv-req', 'inv-req-btn');\n  requestBtn.setAttribute('type', 'button');\n  requestBtn.id = `invoice-request-btn-${data}`;\n  requestBtn.textContent = 'Req. invoice';\n\n  const innerBtnGroup = document.createElement('div');\n  innerBtnGroup.classList.add('btn-group');\n  innerBtnGroup.setAttribute('role', 'group');\n\n  const dropdownBtn = document.createElement('button');\n  dropdownBtn.classList.add(\n    'btn',\n    'btn-primary',\n    'dropdown-toggle',\n    'inv-req',\n    'inv-req-menu'\n  );\n  dropdownBtn.setAttribute('type', 'button');\n  dropdownBtn.setAttribute('aria-expanded', false);\n  dropdownBtn.dataset.bsToggle = 'dropdown';\n\n  const dropdownItem = document.createElement('span');\n  dropdownItem.classList.add('dropdown-item', 'btn');\n  dropdownItem.textContent = 'Specify pay period';\n\n  const dropdownItemContainer = document.createElement('li');\n  const dropdownMenu = document.createElement('ul');\n  dropdownMenu.classList.add('dropdown-menu');\n\n  dropdownBtn.append(innerBtnGroup);\n\n  dropdownItemContainer.append(dropdownItem);\n  dropdownMenu.append(dropdownItemContainer);\n\n  btnGroup.append(requestBtn);\n  btnGroup.append(dropdownBtn);\n  btnGroup.append(dropdownMenu);\n\n  dropdownMenu.addEventListener('click', () => {\n    PayPeriod.launchModal(row);\n  });\n  requestBtn.addEventListener('click', (e) => {\n    const table = e.target.closest('table');\n    requestInvoice(data, table);\n  });\n\n  return btnGroup;\n};\n\nconst renderAmount = (amount, currency) =>\n  currency.name == 'JPY' ? '' : currency.symbol + amount.toLocaleString();\n\nconst renderAmountJPY = (data) => '¥' + data.toLocaleString();\n\nconst renderInvoiceStatus = (data, row) => {\n  const STATUSES = row.invoice_status_choices;\n  const selectEl = document.createElement('select');\n  selectEl.classList.add('form-control-plaintext', 'status', 'p-0');\n  selectEl.setAttribute('name', 'invoice_status');\n  for (const [_, status] of Object.entries(STATUSES)) {\n    const optionEl = document.createElement('option');\n    optionEl.value = status[0];\n    optionEl.text = status[1];\n    if (status[0] === data) optionEl.setAttribute('selected', '');\n    selectEl.appendChild(optionEl);\n  }\n  return selectEl.outerHTML;\n};\n\nconst createVendorOption = (id, label, selectEl, row) => {\n  const optionEl = document.createElement('option');\n  optionEl.value = id;\n  optionEl.text = label;\n  selectEl.appendChild(optionEl);\n  if (id == row.vendor_id) optionEl.setAttribute('selected', '');\n};\n\nconst renderVendorName = (row) => {\n  const vendors = row.vendors_dict ? row.vendors_dict : null;\n  const selectEl = document.createElement('select');\n\n  selectEl.classList.add('form-control-plaintext', 'vendor');\n  selectEl.setAttribute('name', 'vendor-select');\n  createVendorOption(0, 'Select vendor', selectEl, row);\n\n  if (vendors) {\n    Object.entries(vendors).forEach(([id, name]) => {\n      createVendorOption(id, name, selectEl, row);\n    });\n  }\n\n  return selectEl.outerHTML;\n};\n\nconst renderPayPeriod = (data) => {\n  if (data) {\n    const date = new Date(data);\n\n    const formatter = new Intl.DateTimeFormat('ja-JP', {\n      year: 'numeric',\n      month: 'long',\n      timeZone: 'UTC',\n    });\n\n    const formattedDate = formatter.format(date);\n    return `${formattedDate}末`;\n  } else {\n    return '-';\n  }\n};\n\nconst statusFilters = document.querySelectorAll(\n  '.display-filter .status-filter'\n);\n\n/**\n * Extends DataTables search to allow filtering by checkbox selection\n */\nexport const initializeStatusFilters = () => {\n  DataTable.ext.search.push(function (settings, data) {\n    const status = new DOMParser()\n      .parseFromString(data[9], 'text/html')\n      .querySelector('select').value; // invoice status;\n    let selectedStatuses = [];\n    statusFilters.forEach((status) => {\n      if (status.checked) selectedStatuses.push(status.value.toUpperCase());\n    });\n    if (selectedStatuses.length > 0)\n      return selectedStatuses.includes(status) ? true : false;\n\n    return true;\n  });\n};\n\nexport const setupSortByStatus = () => {\n  // Defines the order of the invoice status column\n  const invoiceStatusOrderMap = {\n    NR: 1,\n    REQ: 2,\n    REC: 3,\n    REC2: 4,\n    ERR: 5,\n    QUE: 6,\n    PAID: 7,\n    NA: 8,\n  };\n\n  DataTable.ext.type.order['status-pre'] = (data) => {\n    const statusOrder = invoiceStatusOrderMap[data];\n    return statusOrder ? statusOrder : -1;\n  };\n};\n\nconst enableDisableVendorSelection = (row, data) => {\n  data.invoice_status === 'NR'\n    ? row.querySelector('.cost-vendor-select').removeAttribute('disabled')\n    : row.querySelector('.cost-vendor-select').setAttribute('disabled', '');\n};\n\nconst enableDisableInvoiceRequestBtn = (row, data) => {\n  // enables/disables both parts of the invoice request button group\n  data.invoice_status === 'NR' && data.vendor_id != 0\n    ? row\n        .querySelectorAll('.inv-req')\n        .forEach((el) => el.removeAttribute('disabled'))\n    : row\n        .querySelectorAll('.inv-req')\n        .forEach((el) => el.setAttribute('disabled', ''));\n};\n\nconst handleStatusChange = (e) => {\n  const selectEl = e.target;\n  const table = selectEl.closest('table');\n  const status = selectEl.value;\n  const rowID = selectEl.closest('tr').getAttribute('id');\n  $.ajax({\n    headers: { 'X-CSRFToken': CSRFTOKEN },\n    method: 'POST',\n    url: '/pipeline/update-invoice-table-row',\n    data: { status: status, cost_id: rowID },\n    dataType: 'json',\n    success: (response) => updateTable(response, table),\n    error: (response) => console.warn(response),\n  });\n};\n\n/**\n * Handler for when the vendor for a cost is changed (e.g. in a table)\n *\n * @todo update the error function with something useful\n * @param {*} e\n */\nconst handleVendorChange = (e) => {\n  const selectEl = e.target;\n  const table = selectEl.closest('table');\n  const vendor = selectEl.value;\n  const rowID = selectEl.closest('tr').getAttribute('id');\n  $.ajax({\n    headers: { 'X-CSRFToken': CSRFTOKEN },\n    method: 'POST',\n    url: '/pipeline/update-invoice-table-row',\n    data: { vendor: vendor, cost_id: rowID },\n    dataType: 'json',\n    success: (response) => updateTable(response, table),\n    error: (response) => console.warn(response),\n  });\n};\n\nconst handleRowUpdate = (datatableEl) => {\n  datatableEl.addEventListener('change', (e) => {\n    if (e.target.matches('select.status')) handleStatusChange(e);\n    if (e.target.matches('select.vendor')) handleVendorChange(e);\n  });\n};\n\nconst setupPayPeriodFormSubmission = (\n  datatableEl,\n  payPeriodModal = PayPeriod\n) => {\n  payPeriodModal.form.addEventListener('submit', (e) =>\n    payPeriodModal.submitForm(e, datatableEl)\n  );\n};\n\nconst addRequestBtnListener = (row, data) => {\n  const invoiceRequestBtn = row.querySelector('button.inv-req-btn');\n  invoiceRequestBtn.addEventListener('click', (e) => {\n    const table = e.target.closest('table');\n    requestInvoice(data.id, table);\n  });\n};\n\nconst updateTable = (response, table) => {\n  response.status === 'success'\n    ? new DataTable(table).ajax.reload()\n    : console.error(response.message);\n};\n\nconst invoicesTableRowCallback = (row, data) => {\n  enableDisableInvoiceRequestBtn(row, data);\n  // name this function and extract\n  // TODO: add an empty option to the select to handle sorting better\n  if (data.vendor_id == 0) {\n    row.querySelector('select.status').style.display = 'none';\n    row\n      .querySelectorAll('.inv-req')\n      .forEach((el) => el.setAttribute('disabled', ''));\n  }\n};\n\nexport {\n  renderRequestBtn,\n  renderAmount,\n  renderAmountJPY,\n  renderInvoiceStatus,\n  renderVendorName,\n  renderPayPeriod,\n  enableDisableVendorSelection,\n  enableDisableInvoiceRequestBtn,\n  handleStatusChange,\n  handleVendorChange,\n  handleRowUpdate,\n  setupPayPeriodFormSubmission,\n  addRequestBtnListener,\n  updateTable,\n  invoicesTableRowCallback,\n};\n","import DataTable from 'datatables.net';\nimport {\n  handleRowUpdate,\n  renderAmount,\n  renderAmountJPY,\n  renderInvoiceStatus,\n  renderPayPeriod,\n  renderRequestBtn,\n  renderVendorName,\n  invoicesTableRowCallback,\n  setupPayPeriodFormSubmission,\n} from '../costs-and-invoices-common-funcs.js';\nimport { createElement, truncate } from '../utils.js';\n\nimport penIcon from '../../../assets/images/pencil-square.svg';\nimport trashIcon from '../../../assets/images/trash3-fill.svg';\n\n/**\n * Returns the jobID, taken from the URL\n *\n * @returns {string}\n */\nconst getJobID = () => {\n  const jobID = window.location.href.split('/').slice(-2, -1)[0];\n  return jobID;\n};\n\nlet table;\nlet tableEl;\n\nconst initTable = () => {\n  tableEl = document.querySelector('#cost-table');\n  table = new DataTable(tableEl, {\n    paging: false,\n    processing: true,\n    autoWidth: true,\n    order: [[0, 'asc']],\n    orderClasses: false,\n    language: {\n      searchPlaceholder: 'コストを探す',\n      search: '',\n      emptyTable: 'No costs for this job!',\n    },\n\n    ajax: { url: '/pipeline/cost-data/' + getJobID() },\n    rowId: 'id',\n    columns: [\n      {\n        data: 'amount_JPY',\n        className: 'dt-right pe-4',\n        render: (data) => renderAmountJPY(data),\n      },\n      {\n        data: 'amount',\n        className: 'dt-right pe-4',\n        render: (data, type, row) => {\n          return renderAmount(data, {\n            name: row.currency,\n            symbol: row.currency_symbol,\n          });\n        },\n      },\n      {\n        data: 'vendor_name',\n        render: (data, type, row) => renderVendorName(row),\n      },\n      {\n        data: 'description',\n        render: (data) => truncate(data),\n      },\n      { data: 'PO_number' },\n      {\n        data: 'invoice_status',\n        orderDataType: 'dom-cost-select',\n        className: 'p-0',\n        render: (data, type, row) => renderInvoiceStatus(data, row),\n      },\n      {\n        data: 'pay_period',\n        render: (data) => renderPayPeriod(data),\n      },\n      {\n        data: 'id',\n        render: (data, type, row) => renderRequestBtn(data, row),\n      },\n      {\n        // Edit and delete buttons\n        data: 'id',\n        render: (data) => {\n          const editIcon = [\n            'img',\n            {\n              attributes: {\n                src: penIcon,\n                alt: 'edit icon',\n              },\n            },\n          ];\n          const deleteIcon = [\n            'img',\n            {\n              attributes: {\n                src: trashIcon,\n                alt: 'delete icon',\n              },\n            },\n          ];\n\n          const editBtn = [\n            'a',\n            {\n              classes: ['btn', 'btn-outline-secondary'],\n              attributes: { href: `/pipeline/${data}/update-cost/` },\n              children: [editIcon],\n            },\n          ];\n\n          const deleteBtn = [\n            'a',\n            {\n              classes: ['btn', 'btn-outline-secondary'],\n              attributes: { href: `/pipeline/${data}/delete-cost/` },\n              children: [deleteIcon],\n            },\n          ];\n\n          const btnGroup = createElement('div', {\n            classes: ['btn-group', 'btn-group-sm'],\n            attributes: { role: 'group' },\n            children: [editBtn, deleteBtn],\n          });\n          return btnGroup;\n        },\n      },\n      {\n        data: 'id',\n        visible: false,\n      },\n    ],\n    rowCallback: (row, data) => invoicesTableRowCallback(row, data),\n  });\n  return table;\n};\n\nconst costTable = (() => {\n  const getOrInitTable = () => table || initTable();\n  const getTableEl = () =>\n    getOrInitTable().table().container().querySelector('table');\n  const refresh = () => table.ajax.reload();\n  const setupTableEventHandlers = (datatableEl = getTableEl()) => {\n    handleRowUpdate(datatableEl);\n    setupPayPeriodFormSubmission(datatableEl);\n  };\n\n  return { getOrInitTable, getTableEl, refresh, setupTableEventHandlers };\n})();\n\nexport default costTable;\n","'use strict';\n\nimport '../../styles/index.scss';\nimport Calculator from './currency_calculator.js';\nimport costTable from './costsheet-dt.js';\n\ncostTable.getOrInitTable();\ncostTable.setupTableEventHandlers();\nCalculator.setup();\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/static/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t977: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunknpt\"] = self[\"webpackChunknpt\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [547], function() { return __webpack_require__(7418); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","jQuery","csrftoken","document","querySelector","value","createElement","type","options","element","classes","classList","add","attributes","Object","keys","forEach","key","setAttribute","text","textContent","children","child","appendChild","id","data","dataset","calcInput","calcResult","source","target","createOptionEl","currency","initialCurrency","el","build","fxRatesDict","sort","sourceOption","targetOption","handleCalcInput","inputEl","outputEl","calculate","output","zeroInputAndOutput","input","x","inputVal","srcRate","trgtRate","numStr","parseInt","replaceAll","toString","replace","separateThousands","toFixed","addEventListener","selectEl","setup","successCallback","$","headers","method","url","dataType","success","error","response","alert","DataTable","requestInvoice","costID","table","costPayPeriod","console","log","CSRFTOKEN","pay_period","row","invalidate","draw","warn","form","modalEl","modal","Modal","defineMenu","descriptionDiv","reset","innerHTML","submitForm","e","preventDefault","payPeriod","hide","launchModal","rowData","idField","vendor_name","PO_number","job_name","str","pEl","show","window","createVendorOption","label","optionEl","vendor_id","handleRowUpdate","querySelectorAll","datatableEl","matches","closest","status","rowID","getAttribute","cost_id","updateTable","handleStatusChange","vendor","handleVendorChange","ajax","reload","message","tableEl","getOrInitTable","paging","processing","autoWidth","order","orderClasses","language","searchPlaceholder","search","emptyTable","location","href","split","slice","rowId","columns","className","render","toLocaleString","renderAmountJPY","amount","name","symbol","currency_symbol","renderAmount","vendors","vendors_dict","entries","outerHTML","renderVendorName","truncate","string","maxLength","allowedLengthJp","Math","round","jpCharCount","match","length","countJapaneseCharacters","totalLength","substring","orderDataType","renderInvoiceStatus","STATUSES","invoice_status_choices","_","date","Date","Intl","DateTimeFormat","year","month","timeZone","format","renderPayPeriod","renderRequestBtn","btnGroup","requestBtn","innerBtnGroup","dropdownBtn","bsToggle","dropdownItem","dropdownItemContainer","dropdownMenu","append","PayPeriod","role","src","penIcon","alt","trashIcon","visible","rowCallback","invoicesTableRowCallback","enableDisableInvoiceRequestBtn","invoice_status","removeAttribute","style","display","getTableEl","container","refresh","setupTableEventHandlers","setupPayPeriodFormSubmission","payPeriodModal","costTable","Calculator","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","call","m","O","result","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","every","splice","r","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","p","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","push","__webpack_exports__"],"sourceRoot":""}